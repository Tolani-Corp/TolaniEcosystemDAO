# Pre-Mainnet Deployment Checklist
**Last Updated:** January 2, 2026
**Status:** ‚úÖ READY FOR MAINNET

---

## üß™ Test Results Summary

### Unit Tests (Hardhat)
```
npx hardhat test
```
| Suite | Tests | Status |
|-------|-------|--------|
| MockGovernanceToken | 3 | ‚úÖ PASS |
| TolaniEcosystemGovernor | 5 | ‚úÖ PASS |
| TolaniTreasury | 3 | ‚úÖ PASS |
| TolaniEcosystemTimelock | 3 | ‚úÖ PASS |
| **Total** | **14** | **‚úÖ PASS** |

### Stress Tests (Base Sepolia)
```
npx hardhat run scripts/stress-tests/run-all-tests.js --network baseSepolia
```
| Scenario | Operations | Success Rate | Status |
|----------|------------|--------------|--------|
| Training Volume | 55 | 100% | ‚úÖ PASS |
| Payment Rails | 25 | 100% | ‚úÖ PASS |
| Token Conversion | 20 | 100% | ‚úÖ PASS |

### Pre-Mainnet Verification
```
npx hardhat run scripts/verify-pre-mainnet.js --network baseSepolia
```
| Category | Tests | Status |
|----------|-------|--------|
| Contract Deployment | 7/7 | ‚úÖ PASS |
| Role Configuration | 3/3 | ‚úÖ PASS |
| Payment Flow | 2/2 | ‚úÖ PASS |
| Training Rewards | 2/2 | ‚úÖ PASS |
| Token Conversion | 2/2 | ‚úÖ PASS |
| Security Checks | 2/2 | ‚úÖ PASS |
| **Total** | **18/18** | **‚úÖ PASS** |

---

## üìã Contract Addresses (Base Sepolia - Testnet)

| Contract | Address | Version |
|----------|---------|---------|
| uTUT Token | `0xf4758a12583F424B65CC860A2ff3D3B501cf591C` | v1 |
| MockBridgedTUT | `0x05AbCD77f178cF43E561091f263Eaa66353Dce87` | v1 |
| TUTConverterSimple | `0xCFce25C0eF67e51E8Fe85Dcba7F4501d5BeE84b2` | v1 |
| TrainingRewardsSimple | `0x4d8FD67c3BAf949A9f7CfCE7830A9588CA0F13dC` | v1 |
| MerchantRegistry | `0x17904f65220771fDBAbca6eCcDdAf42345C9571d` | v1 |
| PaymentProcessor | `0x6A0e297A0116dDeaaa5d1F8a8f6372cC8a7843e1` | **v2** (with refunds) |
| Treasury | `0xC12035B044c5988E9977E50bA0913AEF4eec28F7` | v1 |

---

## ‚úÖ Completed Tests

### Smart Contract Functionality
- [x] Token minting (uTUT)
- [x] Token burning (uTUT for conversion)
- [x] Token transfers (uTUT/TUT)
- [x] Role-based access control
- [x] Pausable functionality
- [x] Reentrancy protection

### Payment System
- [x] Merchant registration
- [x] Merchant approval (direct)
- [x] Payment processing (uTUT)
- [x] Fee calculation & distribution
- [x] **Merchant-initiated refunds** (NEW)
- [x] **Partial refunds** (NEW)
- [x] Refund tracking & status

### Training Rewards
- [x] Campaign creation
- [x] Reward granting
- [x] Budget tracking
- [x] Learner stats

### Token Conversion
- [x] TUT ‚Üí uTUT (18 ‚Üí 6 decimals)
- [x] uTUT ‚Üí TUT (6 ‚Üí 18 decimals)
- [x] Reserve management

### Governance (Unit Tests Only)
- [x] Proposal creation
- [x] Voting
- [x] Execution
- [x] Timelock integration

---

## ‚ö†Ô∏è Remaining Items Before Mainnet

### Security
- [ ] External audit (recommended)
- [ ] Bug bounty program setup
- [ ] Multi-sig wallet (Gnosis Safe) setup
- [ ] Transfer admin roles to multi-sig

### Infrastructure
- [ ] Production RPC endpoints (Alchemy/Infura)
- [ ] Monitoring & alerting setup
- [ ] Emergency pause procedures documented

### Frontend
- [x] Updated PaymentProcessor address
- [x] Fixed decimal formatting (uTUT = 6, TUT = 18)
- [ ] Test on mainnet preview
- [ ] Update environment variables

### Documentation
- [ ] API documentation
- [ ] Integration guide for merchants
- [ ] User guide for payments

---

## üöÄ Mainnet Deployment Order

1. **Deploy uTUT Token** (if not bridging from L1)
2. **Deploy TUTConverterSimple** (with bridged TUT address)
3. **Deploy MerchantRegistry**
4. **Deploy PaymentProcessor v2**
5. **Deploy TrainingRewardsSimple**
6. **Deploy Treasury**
7. **Configure roles:**
   - Grant MINTER_ROLE to TUTConverter & TrainingRewards
   - Grant REGISTRAR_ROLE to PaymentProcessor
8. **Transfer admin to Gnosis Safe**
9. **Verify all contracts on Basescan**

---

## üìä Gas Estimates (Base Sepolia)

| Operation | Gas Used | ~Cost @ 0.001 gwei |
|-----------|----------|-------------------|
| Merchant Registration | ~259,000 | ~$0.01 |
| Payment Processing | ~450,000 | ~$0.02 |
| Reward Grant | ~200,000 | ~$0.01 |
| Token Conversion | ~180,000 | ~$0.01 |
| Merchant Refund | ~150,000 | ~$0.01 |

---

## üîê Environment Variables Needed

```bash
# Mainnet (fill before deployment)
PRIVATE_KEY=your_mainnet_deployer_key
WALLET_ADDRESS=your_mainnet_wallet
BASE_RPC_URL=https://mainnet.base.org
BASESCAN_API_KEY=your_basescan_key
GNOSIS_SAFE_ADDRESS=your_multisig_address
```

---

*Generated by pre-mainnet verification suite*
